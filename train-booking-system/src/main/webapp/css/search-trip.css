body {
    font-family: Arial, sans-serif;
    background: #f4f4f4;
    margin: 0;
    padding: 40px;
    text-align: center;
}

.search-trip-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    margin: 0 auto;
    max-width: calc(100% - 20%);
    width: 100%;
}

.search-panel {
}

.search-bar {
    display: flex;
}

.search-bar .input-section {
    width: 100%;
    display: flex;
}

.input-section {
    display: flex;
    flex-wrap: nowrap; /* Prevent wrapping, always keep children in one line */
    overflow-x: hidden; /* Changed from auto to hidden */
    width: 100%;
    box-sizing: border-box;
}

.input-icon-group {
    flex: 1 1 0;
    min-width: 0; /* Allows shrinking */
    max-width: 200px; /* Default max-width for station inputs */
    display: flex;
    align-items: center;
    justify-content: center;
    border-top: 0.5px solid rgba(72, 72, 72, 0.2);
    border-bottom: 0.5px solid rgba(72, 72, 72, 0.2);
    border-right: 0.5px solid rgba(72, 72, 72, 0.2);
    transition: border-color 0.2s, border-width 0.2s;
    padding: 15px 8px;
    position: relative;
    background-color: white; /* Ensure inputs have a background */
    /* Remove thick border-bottom for focus */
}

.input-icon-group.date-group {
    cursor: pointer;
    width: 180px; /* Fixed width to ensure stability */
    /* Align items to the start if the prompt is shorter */
    align-items: center;
    justify-content: center; /* Center prompt or form group */
}

.add-return-date-prompt {
    display: flex; /* Initially visible */
    align-items: center;
    justify-content: center;
    padding: 10px;
    font-size: 1em;
    color: #007bff;
    cursor: pointer;
    width: 100%;
    text-align: center;
}

.add-return-date-prompt i {
    margin-right: 5px;
}

/* Styles for when the return date is active */
.input-icon-group.return-date-active .add-return-date-prompt {
    display: none;
}

/* Temporary state for positioning Flatpickr correctly for the return date */
/* This makes the icon and form group part of the layout but visually hidden */
#return-date-group.picker-positioning-active .add-return-date-prompt {
    display: none; /* Hide the prompt during positioning phase as well */
}
#return-date-group.picker-positioning-active .return-date-icon-element,
#return-date-group.picker-positioning-active .return-date-form-group-element {
    display: flex !important; /* Override inline display:none and ensure it takes space */
    opacity: 0 !important; /* Make it visually hidden */
    pointer-events: none !important; /* Prevent any interaction */
}

/* Show the moved icon for the return date */
#return-date-group.return-date-active .return-date-icon-element {
    display: flex !important; /* Override inline display:none and match .input-icon display type */
}

.input-icon-group.return-date-active .form-group {
    display: flex !important; /* Show the form group */
    align-items: center; /* Re-align icon and input for date */
}

.clear-return-date {
    background: none;
    border: none;
    color: #888;
    font-size: 0.9em;
    cursor: pointer;
    padding: 0 5px;
    position: absolute;
    top: 50%; /* Vertically center */
    transform: translateY(-50%);
    right: 8px; /* Adjust as needed */
    z-index: 3; /* Above label */
}

.clear-return-date:hover {
    color: #e53935;
}

/* Ensure the form-group for return date takes full width when active */
#return-date-group.return-date-active .form-group {
    width: 100%;
    justify-content: flex-start; /* Align icon to left */
}

/*
    Removed specific padding overrides for .input-icon-group.date-group based on .return-date-active state.
    This allows .input-icon-group.date-group (including #return-date-group)
    to consistently use the padding defined by .input-icon-group (15px 8px),
    which should prevent width changes when toggling between prompt and input.
*/

.input-icon-group:first-child {
    border-left: 0.5px solid rgba(72, 72, 72, 0.2);
    border-top-left-radius: 8px;
    border-bottom-left-radius: 8px;
}

.input-icon-group:last-child {
    /* This applies to the last input group in the input-section */
    border-top-right-radius: 8px;
    border-bottom-right-radius: 8px;
}

/* Base style for the ::after pseudo-element on relevant input groups */
.input-icon-group:has(#original-station)::after,
.input-icon-group:has(#destination-station)::after {
    content: "";
    position: absolute;
    left: 0;
    right: 0;
    bottom: 0;
    height: 0; /* Default state: no height */
    background-color: transparent; /* Default state: transparent background */
    border-radius: 2px;
    z-index: 2;
    transition: background-color 0.2s, height 0.2s;
}

.input-icon-group:has(#original-station:focus)::after,
.input-icon-group:has(#original-station.has-value)::after {
    height: 3px; /* Height on focus or when it has value */
    background-color: #1890ff;
}

.input-icon-group:has(#destination-station:focus)::after,
.input-icon-group:has(#destination-station.has-value)::after {
    height: 3px; /* Height on focus or when it has value */
    background-color: #e53935;
}

.input-icon-group:has(#original-station:focus),
.input-icon-group:has(#destination-station:focus) {
    border-bottom: 0.5px solid rgba(72, 72, 72, 0.2); /* Keep original border */
}

.input-icon-group.date-group {
    /* General styles for date groups, including departure */
    /* padding: 15px 8px; Already inherited from .input-icon-group */
}

.form-group {
    display: flex;
    min-width: 0;
    max-width: none;
    flex: 1 1 0;
    position: relative;
    align-items: center; /* Vertically align items in form-group */
}

.form-group input[type="text"],
.form-group input[type="date"] {
    border: none;
    background: transparent;
    outline: none;
    font-size: 1.1em;
    color: #222;
    width: 100%;
    z-index: 1;
    position: relative;
    opacity: 0;
    height: 36px;
    transition: opacity 0.2s;
    padding: 0; /* Remove browser default padding */
}
/* Specific padding for date inputs if needed, but height should control size */
/* .form-group input[type="date"] { padding: 20px 0; } */

.form-group input[type="text"]:focus,
.form-group input[type="text"].has-value,
.form-group input[type="date"]:focus,
.form-group input[type="date"].has-value {
    opacity: 1;
}

.form-group input[type="text"]:focus,
.form-group input[type="text"].has-value {
    transform: translateY(10%);
}

.form-group label {
    position: absolute;
    left: 0px; /* Small padding from left */
    top: 50%;
    transform: translateY(-50%);
    font-size: 1.2em;
    color: #888;
    pointer-events: none;
    /* padding: 0 4px; */ /* Removed to use left positioning */
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 2;
    transform-origin: left center;
    white-space: nowrap;
}

.form-group input[type="text"]:focus + label,
.form-group input[type="text"].has-value + label {
    top: -2px; /* Adjust for floating label */
    transform: translateY(-50%) scale(0.75); /* translateY was -40% */
    font-weight: 500;
    background-color: white; /* Ensure label background for overlap */
    padding: 0 2px; /* Padding for label background */
}

.form-group input[type="date"]:focus + label,
.form-group input[type="date"].has-value + label {
    top: -2px; /* Adjust for floating label */
    transform: translateY(-50%) scale(0.7); /* translateY was -10% */
    font-weight: 500;
    background-color: white; /* Ensure label background for overlap */
    padding: 0 2px; /* Padding for label background */
}

.input-icon {
    width: 40px;
    height: 40px;
    object-fit: contain;
    opacity: 0.8;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    margin-right: 5px; /* Space between icon and form-group */
}

/* Color for the first input icon (train icon) */
.input-section .input-icon-group:first-child .input-icon i.fa-train-subway {
    color: #1890ff; /* Blue color, matching its focus highlight */
}

/* Color for the second input icon (location icon) */
.input-section .input-icon-group:nth-child(2) .input-icon i.fa-location-dot {
    color: #e53935; /* Red color, matching its focus highlight */
}

/* Color for the third input icon (calendar icon for departure date) */
.input-section .input-icon-group:nth-child(3) .input-icon i.fa-calendar-days {
    color: #28a745; /* Green color */
}

/* Submit Button Styles */
.submit-button {
    background-color: #007bff; /* Primary blue */
    color: white;
    border: none;
    padding: 15px 25px; /* Consistent vertical padding with input groups */
    font-family: Arial, sans-serif;
    font-size: 1.1em; /* Similar to input text */
    font-weight: bold;
    cursor: pointer;
    border-radius: 8px; /* Rounded corners */
    margin-left: 10px; /* Space from input section */
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0; /* Prevent shrinking */
    transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out;
    outline: none; /* Remove default browser outline */
}

.submit-button:hover {
    background-color: #0056b3; /* Darker blue on hover */
}

.submit-button:focus {
    box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.4); /* Focus ring */
}

.submit-button:active {
    background-color: #004085; /* Even darker blue when pressed */
    transform: scale(0.98); /* Slight press effect */
}

/* Media Queries */
@media (max-width: 800px) {
    .input-section {
        flex-direction: column;
        gap: 8px;
        flex-wrap: wrap;
        overflow-x: visible;
    }
    .input-icon-group {
        width: 100%;
        max-width: none;
    }
    .input-icon-group.date-group {
        /* Ensure date groups also take full width */
        width: 100%;
    }

    .search-bar {
        flex-direction: column;
        gap: 10px;
    }
    .submit-button {
        margin-left: 0;
        width: 100%;
    }
}
